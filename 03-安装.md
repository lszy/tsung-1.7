# 依赖 # 
*	Erlang/OTP R16B03以上版本
*	pgsql module由Christian Sunesson 编写(PostgrSQL插件)：源代码可以在http://jungerl.sourceforge.net/ 。下载。它已经包含到Tsung的源代码和bin文件中。它在EPL许可下被允许分发。
*	mysql module由Magnus Ahltorp和Fredrik Thulin编写 ( MySQL插件)：源代码位于http://www.stacken.kth.se/projekt/yxa/。 它已经包含到Tsung的源代码和bin文件中。 它基于第三版BSD协议发布。
*	mochiweb 库（XPath parsing, 可用于HTTP插件中使用动态变量)。源代码位于 https://github.com/mochi/mochiweb.。它已经包含到Tsung的源代码和bin文件中。它基于MIT协议发布。
*	gnuplot 和perl5 （可选，为tsung_status.pl 脚本提供图形输出）这个模板工具集生产HTTP报告集 (查看http://template-toolkit.org/).
*	python 和matplotlib （可选，为tsung-plotter提供图形输出）
*	为了分布式测试，需要不使用密码登录远程服务器（使用无密码的RSA/DSA 密钥或者ssh代理）。也支持Alternatively rsh。
*	bash
# 系统要求 # 
因为tsung要发送大量请求，所以需要操作系统为大并发做一定量的优化，优化内容如下
## 关闭防火墙 ##
关于它，压力测试环境，没事就关了吧！
```
Shell># systemctl stop firewalld
```
## seliunx ##
不多说，关了它
```
Shell># setenforce 0 
```
## 使用多IP ##
这部分可以使用多个网卡配置不同的地址，也可以在一个网卡中配置多个地址。<br>
**示例1：使用多个网卡配置多个地址** 

网卡|IP地址|子网掩码|网关
----|-----|-----|----
eth0|10.10.1.101|255.255.255.0|10.10.1.1
eth1|10.10.1.102|255.255.255.0|N.A

配置文件
```
</clients>
  <client host="tsung1" use_controller_vm="false">
      <ip value="10.10.1.101"></ip>
      <ip value="10.10.1.111"></ip>
    </client>
  </clients>
```

**示例2：使用一个网卡配置多个地址**
如果一个网卡上有多个地址，我们除了使用以上方法，我们还可以使用如下方案。

网卡|IP地址|子网掩码|网关
----|-----|-----|----
eth0|10.10.1.101<br>10.10.1.102|255.255.255.0|10.10.1.1

配置文件
```
  </clients>
  <client host="tsung2" use_controller_vm="false" maxusers="800000" cpu="40">
      <ip scan="true" value="ens192"/>
    </client>
  </clients>
```

## 优化内核参数 ##
修改内核参数
```
vm.swappiness = 0
fs.file-max = 6553500
fs.aio-max-nr = 655360
net.ipv4.ip_local_port_range = 1024 65535
kernel.sem = 5010 641280 5010 128
```
## 优化系统参数 ## 
修改系统文件打开数
```
shell># echo '*                soft    nofile          6553500' >>/etc/security/limits.conf
shell># echo '*                hard    nofile          6553500' >>/etc/security/limits.conf
```
# 编译 #
* 安装erlang
```
Shell>#rpm -ivh erlang-20.1.5-1.el7.centos.x86_64.rpm
```
* 安装Template-Toolkit
Template-Toolkit是用于图形模板，如使用web图形，推荐安装，要不爽歪歪了哦
```
Shell># tar xf Template-Toolkit-2.26.tar.gz
Shell># cd Template-Toolkit-2.26
Shell># yum -y install perl perl-ExtUtils-MakeMaker unzip 
Shell># perl Makefile.PL 
Shell># make install
```
* 安装tsung
编译Tsung,仅需要下载从http://tsung.erlang-projects.org/dist/下载最后的版本，并运行：
```
Shell># yum -y install gcc make gnuplot
Shell># tar xf tsung-1.7.0.tar.gz
Shell># cd tsug-1.7.0
Shell># ma./configure
Shell># make
Shell># make install
```
如果你希望下载最后一个开发版本，使用git：<br>
Shell># git clone https://github.com/processone/tsung.git<br>
下载地址 https://github.com/processone/tsung<br>

你也可以使用预编译安装包，如deb(Debian 和 Ubuntu)或rpm(如Fedora, RHEL 或其它基于rpm的发行版)。但是一般版本更新较慢。
